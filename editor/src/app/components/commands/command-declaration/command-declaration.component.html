<div
  *ngIf="isSupported(command) && command.short_desc"
  class="mb-3"
  (click)="onDescriptionClick($event)"
  [innerHTML]="command | linkify : game : gameExtensions | sanitize"
></div>

<div *ngIf="command.attrs?.is_unsupported" class="mb-3">
  {{ "ui.commandList.unsupported" | translate }}
</div>
<div *ngIf="command.attrs?.is_nop" class="mb-3">
  {{ "ui.commandList.nop" | translate }}
</div>

<ng-container
  [ngTemplateOutlet]="
    (viewContext$ | async) === ViewContext.Code ? Function : ScriptCommand
  "
>
</ng-container>

<ng-template #Function>
  <code>
    function

    <ng-container *ngIf="command.class && command.member"
      >{{ command.class }}_{{ command.member }}</ng-container
    >

    <ng-container *ngIf="!command.class && command.member">{{
      command.member
    }}</ng-container>

    <ng-container *ngIf="command.cc"
      ><{{ command.cc }}{{ ", " + command.name }}></ng-container
    >

    <span [innerHTML]="command | classParams | sanitize"></span>
  </code>
</ng-template>

<ng-template #ScriptCommand>
  <ng-container *ngIf="command.class && command.member">
    <ng-container *ngIf="command.output?.length">
      <code>
        <span [innerHTML]="command | outputParams | sanitize"></span> =
        <a
          class="identifier"
          [attr.title]="classDesc"
          [routerLink]="['/', game, 'script', 'classes', command.class]"
          >{{ command.class }}</a
        >.<span class="identifier">{{ command.member }}</span
        ><span [innerHTML]="command | inputParams | sanitize"></span
      ></code>
    </ng-container>

    <ng-container *ngIf="!command.output?.length">
      <code
        ><a
          class="identifier"
          [attr.title]="classDesc"
          [routerLink]="['/', game, 'script', 'classes', command.class]"
          >{{ command.class }}</a
        >.<span class="identifier">{{ command.member }}</span
        ><span [innerHTML]="command | classParams | sanitize"></span
      ></code>
    </ng-container>
  </ng-container>
</ng-template>
